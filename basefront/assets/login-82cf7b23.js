import{r as e,i as a,u as s,j as r,a as l,k as t,l as u,_ as o,b as n,c as m,e as d,w as i,o as f,h as g}from"./index-3bb5a904.js";const p={class:"login-page"};const c=o({setup(){var o;const n=e({username:"",password:""}),m=a(),d=e(!1),i=s(),f=r(),g=null==(o=null==f?void 0:f.query)?void 0:o.redirect,p=e();g&&(p.value=g.toString());const c=l({username:[{required:!0,message:"Username is required",trigger:"blur"},{min:3,max:16,message:"Length should be between 3 and 16",trigger:"blur"}],password:[{required:!0,message:"password is required",trigger:"blur"},{min:8,max:12,message:"Length should be between 8 and 12",trigger:"blur"}]}),b=e(),h=t(),v=e=>{d.value=!0,u(e).then((e=>{if(e){const{token:a,userInfo:s}=e;m.setToken(a),m.setUserinfo(s),m.setLanguage(s.language||"en"),localStorage.setItem("Authorization",a),localStorage.setItem("language",s.language||"en"),h.fetchMenus().then((()=>{p.value?i.push({path:p.value}):i.push("/")})).catch().finally()}})).catch().finally((()=>{d.value=!1}))};return{formData:n,rules:c,submitForm:()=>{var e;null==(e=b.value)||e.validate((e=>{if(!e)return!1;v(n.value)}))},formRef:b,userLogin:v,redirectUrlStr:p,submitStatus:d}}},[["render",function(e,a,s,r,l,t){const u=n("el-input"),o=n("el-form-item"),c=n("el-button"),b=n("el-form");return f(),m("div",p,[d(b,{ref:"formRef",model:r.formData,rules:r.rules},{default:i((()=>[d(o,{label:"username",prop:"username"},{default:i((()=>[d(u,{modelValue:r.formData.username,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.username=e)},null,8,["modelValue"])])),_:1}),d(o,{label:"password",prop:"password"},{default:i((()=>[d(u,{modelValue:r.formData.password,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.password=e)},null,8,["modelValue"])])),_:1}),d(o,{class:"submit-wrap"},{default:i((()=>[d(c,{type:"primary",disabled:r.submitStatus,onClick:r.submitForm},{default:i((()=>[g("Submit")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1},8,["model","rules"])])}],["__scopeId","data-v-4f54d17a"]]);export{c as default};
