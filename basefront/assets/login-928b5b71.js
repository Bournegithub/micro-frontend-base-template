import{r as e,i as a,u as s,j as r,a as t,k as l,l as u,_ as o,b as n,c as m,e as i,w as d,o as f,h as g}from"./index-ebda0b9e.js";import{u as p}from"./vue.f36acd1f-33dbb753.js";const c={class:"login-page"};const b=o({setup(){var o;const n=e({username:"",password:""}),m=a(),i=e(!1),d=s(),f=r(),g=null==(o=null==f?void 0:f.query)?void 0:o.redirect,c=e();g&&(c.value=g.toString());const b=t({username:[{required:!0,message:"Username is required",trigger:"blur"},{min:3,max:16,message:"Length should be between 3 and 16",trigger:"blur"}],password:[{required:!0,message:"password is required",trigger:"blur"},{min:8,max:12,message:"Length should be between 8 and 12",trigger:"blur"}]}),v=e(),h=l(),w=e=>{i.value=!0,u(e).then((e=>{if(e){const{token:a,userInfo:s}=e;m.setToken(a),m.setUserinfo(s),m.setLanguage(s.language||"en"),localStorage.setItem("Authorization",a),localStorage.setItem("language",s.language||"en"),h.fetchMenus().then((()=>{c.value?d.push({path:c.value}):d.push("/")})).catch().finally()}})).catch().finally((()=>{i.value=!1}))},_=p({title:"My awesome site login page",meta:[{name:"description",content:"Learn more about us."}]});return{formData:n,rules:b,submitForm:()=>{var e;null==(e=v.value)||e.validate((e=>{if(!e)return!1;w(n.value)}))},formRef:v,userLogin:w,redirectUrlStr:c,submitStatus:i,seoHead:_}}},[["render",function(e,a,s,r,t,l){const u=n("el-input"),o=n("el-form-item"),p=n("el-button"),b=n("el-form");return f(),m("div",c,[i(b,{ref:"formRef",model:r.formData,rules:r.rules},{default:d((()=>[i(o,{label:"username",prop:"username"},{default:d((()=>[i(u,{modelValue:r.formData.username,"onUpdate:modelValue":a[0]||(a[0]=e=>r.formData.username=e)},null,8,["modelValue"])])),_:1}),i(o,{label:"password",prop:"password"},{default:d((()=>[i(u,{modelValue:r.formData.password,"onUpdate:modelValue":a[1]||(a[1]=e=>r.formData.password=e)},null,8,["modelValue"])])),_:1}),i(o,{class:"submit-wrap"},{default:d((()=>[i(p,{type:"primary",disabled:r.submitStatus,onClick:r.submitForm},{default:d((()=>[g("Submit")])),_:1},8,["disabled","onClick"])])),_:1})])),_:1},8,["model","rules"])])}],["__scopeId","data-v-2b6909fe"]]);export{b as default};
